extends /templates/prototypes/_layouts/default

block append pageVariables
    - var moduleTitle = "Terms and conditions"

block content
    .c-app-layout-inner
        .c-app-layout-inner__sidebar.u-position-fixed
            include /templates/prototypes/partials/side-menu

        .c-app-layout-inner__content
            include /templates/prototypes/partials/main-title

            .o-container.o-container--large
                .o-container-vertical--padding-small.u-position-relative
                    .u-spacer-bottom-l
                        +c-alert({
                            skin: 'warning',
                            message: '<div>Veuillez accepter notre <a href="" data-scroll-to data-scroll-target-id="acceptation" >contrat d’utilisation en fin de page <button class="c-button c-button--small c-button--highlights c-button--icon u-inline-block u-m-r-0" type="button"><span class="c-button__content"><div class="o-svg-icon o-svg-icon--arrow-down"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 4C12.5523 4 13 4.44772 13 5V16.5858L17.2929 12.2929C17.6834 11.9024 18.3166 11.9024 18.7071 12.2929C19.0976 12.6834 19.0976 13.3166 18.7071 13.7071L12.7071 19.7071C12.3166 20.0976 11.6834 20.0976 11.2929 19.7071L5.29289 13.7071C4.90237 13.3166 4.90237 12.6834 5.29289 12.2929C5.68342 11.9024 6.31658 11.9024 6.70711 12.2929L11 16.5858V5C11 4.44772 11.4477 4 12 4Z" fill="#595959" /></svg></div><div class="u-sr-accessible">Scroll jusqu\'en bas de page</div></span></button></a>&nbsp; pour continuer à utiliser nos services. Si vous avez des questions, veuillez contactez un conseiller ou voir la rubrique aide</div>'
                        })
                    div.c-panel
                        div.c-table-of-content.c-content
                            nav.c-table-of-content-navigation.fixed#table-of-content-nav(role="navigation" aria-label="Table of content")
                                ol.c-table-of-content__nav.relativeWidth.stickyPosition
                                    li.not-numbered
                                        a.c-table-of-content__nav__item(href='#section1' aria-selected="true") Préambule
                                    li.not-numbered
                                        a.c-table-of-content__nav__item(href='#section2') Les parties
                                    li
                                        a.c-table-of-content__nav__item(href='#section3') Objet du contrat
                                    li
                                        a.c-table-of-content__nav__item(href='#section4') Définitions
                                    li
                                        a.c-table-of-content__nav__item(href='#section5') Le titulaire
                                    li
                                        a.c-table-of-content__nav__item(href='#section6') L'entreprise partagée
                                    li
                                        a.c-table-of-content__nav__item(href='#section7') Création et vie d'une Activité
                                    li
                                        a.c-table-of-content__nav__item(href='#section8') Droits de l'Entreprise partagée
                                    li
                                        a.c-table-of-content__nav__item(href='#section9') Droits du Titulaire
                                    li
                                        a.c-table-of-content__nav__item(href='#section10') Exclusion
                                    li
                                        a.c-table-of-content__nav__item(href='#section11') Droit et attribution de compétence
                                    li
                                        a.c-table-of-content__nav__item(href='#section12') Conclusion
                                    .current-state(aria-hidden="true")

                            div.c-table-of-content__content
                                section#section1.c-table-of-content__content__item.u-spacer-bottom-xl.u-padding-bottom-s
                                    p.c-body-2.u-spacer-bottom-s Préambule
                                    h2.c-h3.u-spacer-bottom-xs  Quels sont les objectifs de notre contrat d’utilisation ?
                                    p Le présent Contrat d’Utilisation vise à régir la relation entre le Titulaire et l’entreprise Smart, (ci-après dénommée l’ « Entreprise Partagée ») ainsi que les droits et obligations de l’une et l’autre partie. Ce contrat a également pour objectif d'accompagner, d’informer et d’orienter le Titulaire dans la gestion de l’Activité, qu’il ou elle a décidé de constituer et de développer au sein de l’Entreprise Partagée. Ce contrat n’a pas vocation à régir la relation entre la société coopérative SmartCoop (ci-après dénommée « SmartCoop ») et ses sociétaires, cette relation étant régie par le code des sociétés et des associations (CSA), les statuts et le Règlement d’Ordre Intérieur de SmartCoop<a href="#Note01" class="link--sup"><sup>1</sup></a>. Ce contrat n’a pas non plus vocation à régir la relation entre Smart<a href="#Note02" class="link--sup"> <sup>2</sup></a> et ses travailleurs salariés. Cette relation étant régie par le contrat de travail, le règlement de travail et le droit du travail. Conformément à l’article 4 des statuts de SmartCoop<a href="#Note03" class="link--sup"><sup>3</sup></a>, le présent contrat et toutes ses modifications ultérieures sont validés par le Conseil d’administration de SmartCoop. Toute modification du Contrat d’Utilisation est automatiquement portée à la connaissance du Titulaire et soumise à son acceptation, dans son « Espace Activité ».
                                    hr.c-hr
                                    .foot-notes.u-text-small
                                        p#Note01 <sup>1</sup> <a href="http://www.ejustice.just.fgov.be/cgi_tsv/tsv_rech.pl?language=fr&amp;btw=0668600511&amp;liste=Liste">Statuts de SmartCoop SCES agréée, Moniteur Belge</a>, articles 8 à 10. <a href="https://smartbe.be/wp-content/uploads/2021/04/ROI_FR.pdf">Règlement d’Ordre Intérieur de SmartCoop</a>
                                        p#Note02 <sup>2</sup> Entendue comme SmartCoop ou l’une de ses entités de productions telles que définies dans le Règlement d’Usages.
                                        p#Note03 <sup>3</sup> <a href="http://www.ejustice.just.fgov.be/cgi_tsv/tsv_rech.pl?language=fr&amp;btw=0668600511&amp;liste=Liste">Statuts de SmartCoop SCES agréée, Moniteur Belge</a>, article 4
                                section#section2.c-table-of-content__content__item.u-spacer-bottom-xl.u-padding-bottom-s
                                    p.c-body-2.u-spacer-bottom-s Les parties
                                    h2.c-h3.u-spacer-bottom-xs  Les différentes parties liées au contrat
                                    p Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore.
                                section#section3.c-table-of-content__content__item.u-spacer-bottom-xl.u-padding-bottom-s
                                    p.c-body-2.u-spacer-bottom-s Article 1
                                    h2.c-h3.u-spacer-bottom-xs  Objet du contrat
                                    p Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore.
                                section#section4.c-table-of-content__content__item.u-spacer-bottom-xl.u-padding-bottom-s
                                    p.c-body-2.u-spacer-bottom-s Article 2
                                    h2.c-h3.u-spacer-bottom-xs  Définitions
                                    p Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore.
                                    p Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore.
                                    p Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore.
                                    p Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore.
                                    p Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore.
                                section#section5.c-table-of-content__content__item.u-spacer-bottom-xl.u-padding-bottom-s
                                    p.c-body-2.u-spacer-bottom-s Article 3
                                    h2.c-h3.u-spacer-bottom-xs  Le titulaire
                                    p Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore.
                                section#section6.c-table-of-content__content__item.u-spacer-bottom-xl.u-padding-bottom-s
                                    p.c-body-2.u-spacer-bottom-s Article 4
                                    h2.c-h3.u-spacer-bottom-xs  L'entreprise partagée
                                    p Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore.
                                section#section7.c-table-of-content__content__item.u-spacer-bottom-xl.u-padding-bottom-s
                                    p.c-body-2.u-spacer-bottom-s Article 5
                                    h2.c-h3.u-spacer-bottom-xs  Création et vie d'une Activité
                                    p Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore.
                                    p Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore.
                                    p Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore.
                                    p Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore.
                                    p Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore.
                                section#section8.c-table-of-content__content__item.u-spacer-bottom-xl.u-padding-bottom-s
                                    p.c-body-2.u-spacer-bottom-s Article 6
                                    h2.c-h3.u-spacer-bottom-xs  Droits de l'Entreprise partagée
                                    p Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore.
                                section#section9.c-table-of-content__content__item.u-spacer-bottom-xl.u-padding-bottom-s
                                    p.c-body-2.u-spacer-bottom-s Article 7
                                    h2.c-h3.u-spacer-bottom-xs  Droits du Titulaire
                                    p Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore.
                                    p Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore.
                                section#section10.c-table-of-content__content__item.u-spacer-bottom-xl.u-padding-bottom-s
                                    p.c-body-2.u-spacer-bottom-s Article 8
                                    h2.c-h3.u-spacer-bottom-xs  Exclusion
                                    p Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore.
                                section#section11.c-table-of-content__content__item.u-spacer-bottom-xl.u-padding-bottom-s
                                    p.c-body-2.u-spacer-bottom-s Article 9
                                    h2.c-h3.u-spacer-bottom-xs  Droit et attribution de compétence
                                    p Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore.
                                section#section12.c-table-of-content__content__item.u-spacer-bottom-xl.u-padding-bottom-s
                                    p.c-body-2.u-spacer-bottom-s Article 10
                                    h2.c-h3.u-spacer-bottom-xs  Conclusion
                                    p Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore.
                                    p Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore.
                                    p Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore.
                                    p Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore.
                                    p Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore.
                                    p Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore.
                                    p Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore.
                                    p Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore.
                                    p Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore.
                                .back-to-top
                                    button.c-button.c-button--secondary.c-button--icon.u-shadow-10
                                        span.c-button__content
                                            +icon('arrow-up')
                                            .u-sr-accessible Back to table of content

                        div#acceptation.u-padding-xl
                            div.c-panel--yellow.u-padding-l.u-padding-horizontal-xl.c-panel--border-r-sm
                                div.u-flex.u-flex--twins.o-flex--vertical-center
                                    div
                                        .c-checkbox-group
                                            .c-checkbox
                                                label
                                                    input(type="checkbox" data-toggle="disabled" data-switch-target="c-button--warning")
                                                    | J’accepte le contrat d’utilisation
                                    div
                                        +c-button({skin: 'warning', icon: 'check'})(disabled) Valider
    script.
        window.addEventListener('load', (event) => {
            class Toc {
                constructor(el) {
                    this.el = el;
                    this.toc__nav__list = this.el.querySelector(".c-table-of-content__nav");
                    this.toc__nav__list__items = this.el.querySelectorAll("a.c-table-of-content__nav__item");
                    this.toc__content__list = document.querySelector(".c-table-of-content__content");
                    this.toc__content__list__items = document.querySelectorAll(".c-table-of-content__content__item");
                    this.current__index = 0;
                    this.current_state = this.el.querySelector(".current-state");
                    this.relativeWidth = (this.toc__nav__list.classList.contains('relativeWidth')) ? true : false;
                    this.toc__back_to_top_btn = this.el.querySelector(".back-to-top");
                    this.toc__back_to_top_btn__link = this.toc__back_to_top_btn.querySelector("button");
                    this.toc__back_to_top_btn__visible = false;
                    this.el_init_top = this.el.offsetTop;
                    this.header_height = document.querySelector("header").offsetHeight;
                    this.main_title_height = document.querySelector(".main-title").offsetHeight;
                    this.elPaddingTop = parseFloat(window.getComputedStyle(this.el, null).getPropertyValue('padding-top'));
                    this.toc__content__list__items__posTop_from_parent = [];
                    this.lastScrollTop = 0;
                    this.lastScrollTopd = 0;
                    this.currentUrl = window.location.href.split("#")[0];
                    this.whatever = this.callBackScrollEvent.bind(this, el);
                    this.whateverHash = this.callBackHashEvent.bind(this, el);
                    console.log(this.el_init_top);
                    console.log(this.header_height);
                    console.log(this.main_title_height);
                    this.init();
                }

                init() {
                    this.current_nav_item = this.toc__nav__list.querySelector("[aria-selected]");
                    this.toc__back_to_top_btn.style.display = 'none';

                    //- Set current item selected             
                    let current_index = [...this.toc__nav__list__items].indexOf(this.current_nav_item);

                    this.toc__nav__list__items.forEach((table_of_content__item, i) => {
                        // Attach events to the toc__nav__list__items if the table_of_content__item have toc__content. Otherwise they just act as links
                        table_of_content__item.setAttribute('data-id', this.convertToSlug(table_of_content__item.textContent));
                        this.toc__content__list__items[i].setAttribute('data-id', this.convertToSlug(table_of_content__item.textContent));
                        if (this.toc__content__list__items.length) this.attachClickEvents(table_of_content__item, i);
                        
                        if(i === this.toc__nav__list__items.length-1) {
                            this.callbackItemsSet(current_index, this.current_nav_item);
                        }
                    });

                    this.toc__back_to_top_btn__link.addEventListener("click", (e) => {
                        e.preventDefault();
                        this.scrollTo(this.toc__nav__list);
                    });
                    window.addEventListener('hashchange', this.whateverHash);
                }

                attachClickEvents(table_of_content__item, i) {
                    // Handle clicking of toc__items for mouse users
                    table_of_content__item.addEventListener("click", (e) => {
                        e.preventDefault();
                        e.currentTarget.classList.add("clicked");
                        window.removeEventListener("scroll", this.whatever);
                        window.removeEventListener("hashchange", this.whateverHash);
                        let currentToc = this.toc__nav__list.querySelector("[aria-selected]");
                        this.switchTocAfterClick(currentToc, e.currentTarget);
                    });
                }

                attachScrollEvents(){
                    window.addEventListener("scroll", this.whatever);
                }

                callBackScrollEvent(el){
                    let toc__posTop_from_viewport =  this.el.getBoundingClientRect().top - this.el_init_top - 128 - 26 - 120; // 126 for header and title fiex, 26 for padding, 50 for a gap
                    let window__posTop_from_viewport = window.scrollY;
                    var st = window.pageYOffset || document.documentElement.scrollTop; 

                    //- Handling back-to-top btn
                    if((- this.el.getBoundingClientRect().top) > this.toc__nav__list.clientHeight){
                        if(this.toc__back_to_top_btn__visible === false){
                            this.fadeIn(this.toc__back_to_top_btn);
                            this.toc__back_to_top_btn__visible = true;
                        }
                    }else{
                        if(this.toc__back_to_top_btn__visible === true){
                            this.fadeOut(this.toc__back_to_top_btn);
                            this.toc__back_to_top_btn__visible = false;
                        }
                    }

                    var std = window.pageYOffset || document.documentElement.scrollTop;
                    let index_scroll = 1;
                    if (std > this.lastScrollTop){ // downscroll
                        index_scroll = -1;
                    } else { // upscroll
                        index_scroll = 1; }
                    this.lastScrollTop = std <= 0 ? 0 : std;


                    //- Handling active states on scroll
                    for (let i = 0; i < this.toc__content__list__items__posTop_from_parent.length; i++) {
                        if ((- toc__posTop_from_viewport) > this.toc__content__list__items__posTop_from_parent[i] && (- toc__posTop_from_viewport) < this.toc__content__list__items__posTop_from_parent[i+1]) {
                            if(this.current__index != this.toc__nav__list__items[i]){
                                window.removeEventListener("hashchange", this.whateverHash);
                                this.resetActiveToc( this.toc__nav__list__items[i], this.toc__content__list__items[i], true);
                                var that = this;
                                setTimeout(function(){ 
                                    window.addEventListener("hashchange", that.whateverHash);
                                }, 750);
                            }
                        }
                    }
                    
                }

                callBackHashEvent(el){
                    let hash = window.top.location.hash.substr(1);
                    if(hash.length){
                        window.removeEventListener("scroll", this.whatever);
                        let current_hash_content_item = this.toc__content__list.querySelector('[data-id="' + hash + '"]');
                        this.resetActiveToc(this.toc__nav__list.querySelector('[data-id="' + hash + '"]'), current_hash_content_item, true);
                        this.scrollTo(current_hash_content_item);
                        var that = this;
                        setTimeout(function(){ 
                            window.addEventListener("scroll", that.whatever);
                        }, 750);
                    }
                }

                callbackItemsSet(current_index, current_nav_item ) { 
                    console.log("callbackItemsSet");
                    this.toc__nav__list__items.forEach((table_of_content__item, i) => {
                        this.toc__content__list__items__posTop_from_parent.push(Math.round(this.toc__content__list__items[i].offsetTop));
                    });

                    //- Get # Hashtag from url (ex: lentreprise-partage)
                    let hash = window.top.location.hash.substr(1);
                    console.log(hash);
                    if(hash.length){
                        let current_hash_content_item = this.toc__content__list.querySelector('[data-id="' + hash + '"]');
                        let current_hash_index = [...this.toc__content__list__items].indexOf(current_hash_content_item);
                        this.resetActiveToc(this.toc__nav__list.querySelector('[data-id="' + hash + '"]'), current_hash_content_item, true);
                        this.scrollTo(this.toc__content__list__items[current_hash_index]);
                    }else{
                        this.resetActiveToc(current_nav_item, this.toc__content__list__items[current_index], false);
                    }
                    var that = this;
                    setTimeout(function(){ 
                        that.attachScrollEvents()
                    }, 750);

                }

                resetActiveToc(newTocNavItem, newTocContentItem, setHash){
                    this.positionTopCurrentState(newTocNavItem);

                    if(setHash){
                        window.location.hash = this.convertToSlug(newTocNavItem.textContent);
                    }
                    
                    for (let i = 0; i < this.toc__nav__list__items.length; i++) {
                        this.toc__nav__list__items[i].removeAttribute("aria-selected");
                    }
                    for (let j = 0; j < this.toc__content__list__items.length; j++) {
                        this.toc__content__list__items[j].classList.remove("active");
                    }
                    if (newTocNavItem) newTocNavItem.setAttribute("aria-selected", "true");
                    if (newTocContentItem) newTocContentItem.classList.add("active");
                    this.current__index = newTocNavItem;
                }

                switchTocAfterClick(oldTocNavItem, newTocNavItem) {
                    newTocNavItem.focus();
                    
                    let index = [...this.toc__nav__list__items].indexOf(newTocNavItem);
                    this.resetActiveToc(newTocNavItem, this.toc__content__list__items[index], true);
                    this.scrollTo(this.toc__content__list__items[index]);
                    var that = this;
                    setTimeout(function(){ 
                        newTocNavItem.classList.remove("clicked");
                    }, 400);
                    setTimeout(function(){ 
                        window.addEventListener("scroll", that.whatever);
                        window.addEventListener("hashchange", that.whateverHash);
                    }, 750);
                }

                positionTopCurrentState(child) {
                    // Position of the blue background
                    let table_of_content_Y = this.toc__nav__list.getBoundingClientRect().top;
                    if(child){
                        let itemHeight = child.clientHeight;
                        let relativePosTop =  child.getBoundingClientRect().top  - table_of_content_Y;
                        this.current_state.style.top = relativePosTop + 'px';
                        this.current_state.style.height = itemHeight + 'px';
                        if(this.relativeWidth){
                            let childWidth =  child.offsetWidth;
                            this.current_state.style.width = childWidth + 'px';
                        }
                    }
                }

                scrollTo(element) {
                    let parentPosition = this.el.getBoundingClientRect().top + window.scrollY - this.header_height - this.main_title_height;
                    let index = [...this.toc__content__list__items].indexOf(element);
                    let gap = (index === 0) ? 176 + this.elPaddingTop : 150 + this.elPaddingTop; // custom values from fixed elements
                    let elementPosition = element.offsetTop + (parentPosition - gap);
                    window.scrollTo({
                        top: elementPosition,
                        behavior: "smooth"
                    });
                }

                convertToSlug(str) {
                    str = str.replace(/^\s+|\s+$/g, ''); // trim
                    str = str.toLowerCase();
                
                    // remove accents, swap ñ for n, etc
                    var from = "àáäâèéëêìíïîòóöôùúüûñç·/_,:;";
                    var to   = "aaaaeeeeiiiioooouuuunc------";
                    for (var i=0, l=from.length ; i<l ; i++) {
                        str = str.replace(new RegExp(from.charAt(i), 'g'), to.charAt(i));
                    }

                    str = str.replace(/[^a-z0-9 -]/g, '') // remove invalid chars
                        .replace(/\s+/g, '-') // collapse whitespace and replace by -
                        .replace(/-+/g, '-'); // collapse dashes

                    return str;
                }

                fadeOut(el) {
                    el.style.opacity = 1;
                    (function fade() {
                        if ((el.style.opacity -= .1) < 0) {
                            el.style.display = "none";
                        } else {
                            requestAnimationFrame(fade);
                        }
                    })();
                };

                fadeIn(el, display) {
                    el.style.opacity = 0;
                    el.style.display = display || "block";
                    (function fade() {
                        var val = parseFloat(el.style.opacity);
                        if (!((val += .1) > 1)) {
                            el.style.opacity = val;
                            requestAnimationFrame(fade);
                        }
                    })();
                };
            }
            
            const toclists = document.querySelectorAll(".c-table-of-content");

            if (toclists.length) {
                [...toclists].map((toclist) => new Toc(toclist));
            }

            //- class SwitchViewButton {
            //-     constructor(els) {
            //-         this.els = els;
            //-         this.target__el = document.querySelector('.' + this.els[0].getAttribute('data-switch-target') );

            //-         console.log(els);

  
            //-         this.init();
            //-     }

            //-     init() {
            //-         this.els.forEach((el, i) => {
            //-             // Attach events
            //-             el.addEventListener("click", (e) => {
            //-                 if(el.getAttribute('data-toggle') === "disabled"){
            //-                     this.toggleAttribute(this.target__el, "disabled");
            //-                 }else{
            //-                     e.preventDefault();
            //-                     this.toggleClass(this.target__el, ( el.getAttribute('data-switch-target') + '--' + el.getAttribute('data-toggle')));
            //-                     this.els.forEach((il) => {
            //-                         //- Toggle class for other buttons around
            //-                         this.toggleClass(il, "c-button--secondary");
            //-                         this.toggleClass(il, "c-button--primary");
            //-                     });
            //-                 }

            //-             });
            //-         });
                   
            //-     }

            //-     toggleClass(target, toggleClass){
            //-         target.classList.toggle(toggleClass);
            //-     }
                
            //-     toggleAttribute(target, attribute){
            //-         if (target.hasAttribute(attribute)) {
            //-             target.removeAttribute(attribute) 
            //-         }else{
            //-             target.setAttribute(attribute, "");
            //-         }
            //-     }

            //- }
            
            //- const switchViewButtons = document.querySelectorAll("[data-toggle]");

            //- if (switchViewButtons.length) {
            //-     new SwitchViewButton(switchViewButtons);
            //- }
            
        });

       